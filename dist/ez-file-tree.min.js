!function(a){"use strict";a.module("ez.fileTree",[]).constant("EzFileTreeConfig",{chevronRightIconClass:"icon-chevron-right",chevronDownIconClass:"icon-chevron-down",folderIconClass:"icon-folder-close",fileIconClass:"icon-file",nameField:"name",childrenField:"children",checking:!1}).directive("ezFileTree",["$compile","EzFileTreeConfig",function(b,c){return{restrict:"EA",link:function(d,e,f){var g,h="true"===f.checking?!0:c.checking,i=(f.nameField||c.nameField,f.childrenField||c.childrenField);d.child||(d.child=d.$eval(f.ezFileTree)),g='<ul class="ez-file-tree"><li data-ng-show="child.'+i+" && child."+i+'.length == 0">empty</li><li ng-repeat="child in child.'+i+'" data-ng-dblclick="toggle($event, child)"><div class="label-container" ng-class="{selected: child._selected}"><span class="folder-toggle" data-ng-click="toggle($event, child)"><i class="'+c.chevronRightIconClass+'" title="Open folder" data-ng-show="!child._open && isFolder(child)"></i><i class="'+c.chevronDownIconClass+'" title="Close folder" data-ng-show="child._open && isFolder(child)"></i></span>',g+='<span class="file-name" data-ng-click="select(child)">',h&&(g+='<input type="checkbox" ng-model="child._checked" ng-change="fileChecked(child)" data-ng-show="!isFolder(child)"/>'),g+='<i class="'+c.folderIconClass+'" data-ng-show="isFolder(child)"></i><i class="'+c.fileIconClass+'" data-ng-show="!isFolder(child)"></i>{{child.name}}</span></div><div class="folder-container" ng-show="child._open" data-ez-file-tree="true"></div></li></ul>';var j=function(a){a.child._active=!0,"undefined"!=typeof a.$parent.child&&j(a.$parent)},k=function(b){var c=!1;a.forEach(b.child[i],function(a){a._checked===!0&&(c=!0)}),b.child._active=c,c===!1&&b.$parent.child&&b.$parent.child[i]&&k(b.$parent)};d.fileChecked=function(a){a._checked?j(d):k(d)},d.select=function(a){a._selected=!a._selected},d.toggle=function(a,b){a.stopPropagation(),a.preventDefault(),d.isFolder(b)&&(b._open=!b._open,b[i]||(b[i]=d.getChildren(b)))},d.isFolder=function(a){return a[i]||"folder"===a.type};var l=a.element(g);b(l)(d),e.append(l)}}}])}(angular);