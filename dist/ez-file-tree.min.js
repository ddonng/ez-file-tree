!function(a){"use strict";a.module("ez.fileTree",[]).constant("EzFileTreeConfig",{enableChecking:!1,multiSelect:!1,onlyFileSelection:!1,childrenField:"children",isFolder:function(a){return"folder"===a.type||"album"===a.type},getChildren:function(){return[]}}).controller("RecursionCtrl",["$scope","EzFileTreeConfig",function(b,c){var d=c.childrenField,e=function(a){a.data._active=!0,"undefined"!=typeof a.$parent.$parent.data&&e(a.$parent.$parent)},f=function(b,c){var e=!1;a.forEach(b.data[d],function(a){return a._checked===!0&&c!==a?(e=!0,void 0):void 0}),b.data._active=e,e===!1&&"undefined"!=typeof b.$parent.$parent.data&&f(b.$parent.$parent,c)};b.check=function(a){a._checked?f(b.$parent.$parent,a):e(b.$parent.$parent)}}]).directive("ezFileTree",["$compile","EzFileTreeConfig",function(b,c){return{restrict:"EA",scope:{tree:"=ezFileTree"},templateUrl:"ez-file-tree-container.html",link:function(b,d,e){var f="true"===e.multiSelect?!0:c.multiSelect,g=("true"===e.onlyFileSelection?!0:c.onlyFileSelection,e.childrenField||c.childrenField),h=e.getChildren?b.$eval(e.getChildren):c.getChildren;b.enableChecking="true"===e.enableChecking?!0:c.enableChecking,b.isFolder=e.isFolder?b.$eval(e.isFolder):c.isFolder,b.toggle=function(a,b){b._open=!b._open,b.children&&b.children.length||h(b)};var i=function(b){a.forEach(b,function(a){a[g]&&a[g].length&&i(a[g]),a._selected=!1})};b.select=function(a){a._selected?(a._selected=!1,f?b.tree._selectedFiles.splice(b.tree._selectedFiles.indexOf(a),1):b.tree._selectedFile=null):(f?(b.tree._selectedFiles||(b.tree._selectedFiles=[]),b.tree._selectedFiles.push(a)):(b.tree._selectedFile=a,i(b.tree[g])),a._selected=!0)}}}}])}(angular);